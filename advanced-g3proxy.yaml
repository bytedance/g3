---
runtime:
  thread_number: 4

controller:
  local:
    recv_timeout: 30
    send_timeout: 1

log:
  level: info
  format: json

stat:
  target:
    udp: 127.0.0.1:8125
  prefix: g3proxy
  emit_duration: 200ms

server:
  # HTTP Proxy with TLS support
  - name: http
    escaper: default
    type: http_proxy
    listen:
      address: "[::]:8080"
    tls_client: { }
    task_idle_check_interval: 1m
    task_idle_max_count: 5
    
  # SOCKS5 Proxy with UDP support
  - name: socks
    escaper: default
    type: socks_proxy
    listen:
      address: "[::]:1080"
    enable_udp_associate: true
    udp_socket_buffer: 512K
    task_idle_check_interval: 1m
    task_idle_max_count: 5
    
  # HTTPS Proxy (TLS termination)
  - name: https
    escaper: default
    type: http_proxy
    listen:
      address: "[::]:8443"
    tls_server:
      cert_pairs:
        - certificate: /tmp/test-cert.pem
          private_key: /tmp/test-key.pem
    tls_client: { }
    task_idle_check_interval: 1m
    task_idle_max_count: 5

resolver:
  - name: default
    type: c-ares
    server:
      - 8.8.8.8
      - 8.8.4.4
      - 1.1.1.1
      - 1.0.0.1
    bind_ipv4: 0.0.0.0
    bind_ipv6: ::

escaper:
  - name: default
    type: direct_fixed
    resolver: default
    resolve_strategy: IPv4First
    happy_eyeballs:
      resolution_delay: 200ms
    tcp_sock_speed_limit: 10M/s
    udp_sock_speed_limit: 10M/s
